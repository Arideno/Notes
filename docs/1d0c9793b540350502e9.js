!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";function o(t){var e=document.createElement("li");e.classList.add("sidebar__note");var n=document.createElement("div");t.isActive()&&e.classList.add("active"),n.appendChild(document.createTextNode(t.getTitle()));var o=document.createElement("time");return o.appendChild(document.createTextNode(function(t){var e=t.getFullYear(),n=(1+t.getMonth()).toString();n=n.length>1?n:"0"+n;var o=t.getDate().toString();return(o=o.length>1?o:"0"+o)+"."+n+"."+e}(t.getDate()))),n.appendChild(o),e.appendChild(n),e.dataset.id=t.getID(),e}function r(t,e){t=encodeURIComponent(t),e=encodeURIComponent(e);for(var n=document.location.search.substr(1).split("&"),o=0;o<n.length;o++)if(n[o].startsWith(t+"=")){var r=n[o].split("=");r[1]=e,n[o]=r.join("=");break}o>=n.length&&(n[n.length]=[t,e].join("="));var i=n.join("&");document.location.search=i}function i(t){this._content=t,""===this._content?this._title="New note":this._title=this._content.split("\n")[0],this._url="",this._active=!1,this._date=new Date,this._id="_"+Math.random().toString(36).substr(2,9)}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.r(e),i.prototype={getID:function(){return this._id},getDate:function(){return new Date(this._date)},setActive:function(){this._active=!0},setInactive:function(){this._active=!1},isActive:function(){return this._active},getContent:function(){return this._content},setContent:function(t){this._content=t,this._title=t.split("\n")[0]},getTitle:function(){return this._title},getUrlName:function(){return this._url}};var l=function(t){var e={},n=document.createElement("a");t=t||window.location.href,n.href=t;for(var o=n.search.substring(1).split("&"),r=0;r<o.length;r++){var i=o[r].split("=");e[i[0]]=decodeURIComponent(i[1])}return e},u=(n(0),n(1),document.getElementById("new_note")),f=document.getElementById("delete_note"),d=document.getElementById("sidebar__notes"),p=document.getElementById("note"),g=function(t,e){var n=t(e,{type:"__INIT__"}),o=[];return{dispatch:function(e){n=t(n,e),o.forEach((function(t){return t()}))},subscribe:function(t){o.push(t)},getState:function(){return n}}}((function(t,e){return"CREATE_NOTE"===e.type?c(c({},t),{},{createNewNote:!0}):"DELETE_NOTE"===e.type?c(c({},t),{},{deleteNote:!0}):"SELECT_NOTE"===e.type?c(c({},t),{},{createNewNote:!1,deleteNote:!1,note:e.payload}):t}),{createNewNote:!1,deleteNote:!1,note:null});window.store=g;var _=l();function v(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];d.innerHTML="";var e=JSON.parse(localStorage.getItem("notes"));e.forEach((function(e){e.__proto__=i.prototype,t&&e.setInactive();var n=o(e);d.insertBefore(n,d.firstChild)}))}window.addEventListener("load",(function(){if(null===localStorage.getItem("notes")&&localStorage.setItem("notes",JSON.stringify([])),p.disabled=!0,_.id){var t=_.id,e=localStorage.getItem("notes");e&&((e=JSON.parse(e)).forEach((function(e){e.__proto__=i.prototype,e.setInactive(),e.getID()===t&&(e.setActive(),g.dispatch({type:"SELECT_NOTE",payload:e}))})),localStorage.setItem("notes",JSON.stringify(e)),v(!1))}else v(!0)})),u.addEventListener("click",(function(){g.dispatch({type:"CREATE_NOTE"})})),f.addEventListener("click",(function(){g.dispatch({type:"DELETE_NOTE"})})),window.addEventListener("click",(function(t){t.target.classList.contains("sidebar__note")&&r("id",t.target.dataset.id)})),p.oninput=function(t){var e=t.target.value,n=g.getState().note.getID(),o=localStorage.getItem("notes");o&&(o=JSON.parse(o)).forEach((function(t){t.__proto__=i.prototype,t.getID()===n&&t.setContent(e)})),localStorage.setItem("notes",JSON.stringify(o)),v(!1)},g.subscribe((function(){if(g.getState().createNewNote){var t=new i(""),e=JSON.parse(localStorage.getItem("notes"));e?(e.forEach((function(t){t.__proto__=i.prototype,t.setInactive()})),localStorage.setItem("notes",JSON.stringify(e.concat(t)))):localStorage.setItem("notes",JSON.stringify([t])),r("id",t.getID())}})),g.subscribe((function(){var t=g.getState();if(t.deleteNote&&t.note){for(var e=JSON.parse(null!==localStorage.getItem("notes")?localStorage.getItem("notes"):[]),n=0;n<e.length;n++){var o=e[n];if(o.__proto__=i.prototype,o.getID()===t.note.getID()){e.splice(n,1);break}}if(localStorage.setItem("notes",JSON.stringify(e)),0===e.length)r("id","");else{var a=e[e.length-1];a.__proto__=i.prototype,r("id",a.getID())}}})),g.subscribe((function(){var t=g.getState();if(t.note){t.note.setActive();for(var e=JSON.parse(localStorage.getItem("notes")),n=0;n<e.length;n++){var o=e[n];if(o.__proto__=i.prototype,o.getID()===t.note.getID()){o.setActive();break}}localStorage.setItem("notes",JSON.stringify(e)),v(),p.disabled=!1,p.value=t.note.getContent()}}))}]);